<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ChÃ¡o Dinh DÆ°á»¡ng Máº§m Nhá» â€“ NghÄ©a TÃ¢n</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
:root{
  --green:#2e7d32;
  --orange:#fb8c00;
  --red:#e53935;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:#f4f7f4;
}

/* ========= HOA RÆ I ========= */
.falling-flowers{
  pointer-events:none;
  position:fixed;
  inset:0;
  z-index:2;
}
.flower{
  position:absolute;
  top:-30px;
  font-size:20px;
  opacity:.8;
  animation:fall linear infinite;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg);}
}

/* HEADER */
.header{
  background:#fff;
  border-bottom:1px solid #e0e0e0;
  position:sticky;
  top:0;
  z-index:1000;
}
.header-inner{
  max-width:1000px;
  margin:auto;
  padding:10px 14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.header-left strong{color:var(--green);font-size:16px}
.header-left div{font-size:14px}
.header-right img{height:38px}

/* FLOAT */
.float-right{
  position:fixed;right:12px;bottom:120px;
  display:flex;flex-direction:column;gap:10px;z-index:999;
}
.float-btn{
  width:46px;height:46px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:22px;color:#fff;text-decoration:none;
  box-shadow:0 4px 12px rgba(0,0,0,.25);
}
.float-btn.call{background:#0abf53}
.float-btn.zalo{background:#ffd54f}
.zalo-icon{width:24px;height:24px}

/* LAYOUT */
.container{max-width:1000px;margin:auto;padding:14px;position:relative;z-index:5}
.section{
  background:#fff;
  border-radius:14px;
  padding:14px;
  margin:16px 0;
  box-shadow:0 4px 16px rgba(0,0,0,.06);
}
.section h2{margin:0 0 10px;color:var(--green)}

/* MENU */
.menu-header{display:flex;justify-content:space-between;align-items:center}
.capture-btn{background:none;border:none;font-size:18px;cursor:pointer}
.menu-item{
  display:flex;
  justify-content:space-between;
  padding:8px 0;
  border-bottom:1px dashed #ddd;
}
.menu-price{color:var(--red);font-weight:600}

/* GRID */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
@media(max-width:640px){.grid-2{grid-template-columns:1fr}}
.row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px dashed #ddd}

/* ZALO */
.zalo-under-topping{
  margin-top:12px;
  background:#e8f5e9;
  border-radius:12px;
  padding:10px;
  text-align:center;
}
.zalo-under-topping a{
  display:inline-block;
  margin-top:6px;
  padding:8px 16px;
  background:#0abf53;
  color:#fff;
  border-radius:20px;
  font-weight:700;
  text-decoration:none;
}

/* APP */
.app-grid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:12px;
}
.app-grid img{width:100%;border-radius:8px}

/* COMBO */
.combo-preview{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.combo-preview img{width:100%;border-radius:12px}
.combo-btn{
  margin-top:10px;
  background:var(--orange);
  color:#fff;
  border:none;
  padding:10px 20px;
  border-radius:24px;
  font-weight:700;
  cursor:pointer;
}

/* FOOTER */
.footer{
  display:grid;
  grid-template-columns:1.2fr 0.8fr;
  gap:16px;
}
.footer-right{text-align:center}

.footer-right img{
  width:180px;
  max-width:100%;
  margin-top:8px;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,.15);
  background:#fff;
  padding:6px; 
}

.qr-img{
  width:100%;
  max-width:220px;
  border-radius:14px;
  box-shadow:0 4px 12px rgba(0,0,0,.15);
  background:#fff;
  padding:6px;
  cursor:pointer;
}


/* POPUP */
.popup{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  z-index:3000;
  align-items:center;
  justify-content:center;
}
.popup-content{
  background:#fff;
  border-radius:18px;
  padding:16px;
  max-width:560px;
  width:92%;
  max-height:90vh;
  overflow-y:auto;
}
.popup-actions{
  display:flex;
  gap:10px;
  margin-top:14px;
}
.btn-call{flex:1;background:#2e7d32;color:#fff;padding:10px;border-radius:22px;text-decoration:none;text-align:center;font-weight:700}
.btn-close{flex:1;background:#e53935;color:#fff;padding:10px;border-radius:22px;border:none;font-weight:700}
</style>
</head>

<body>

<div class="falling-flowers" id="flowers"></div>

<!-- HEADER -->
<div class="header">
  <div class="header-inner">
    <div class="header-left">
      <strong>ChÃ¡o Dinh DÆ°á»¡ng Máº§m Nhá» â€“ NghÄ©a TÃ¢n</strong>
      <div> <span style="color:red">ğŸ“ 0363 443 443 </span> â° <span id="timeNow"></span></div>
      <div id="openStatus"></div>
    </div>
    <div class="header-right"><img src="logo.png"></div>
  </div>
</div>

<!-- FLOAT -->
<div class="float-right">
  <a class="float-btn call" href="tel:0363443443">ğŸ“</a>
  <a class="float-btn zalo" href="https://zalo.me/0363443443">ğŸ’¬</a>
</div>

<!-- FLOAT -->
<div class="float-right">
  <a class="float-btn call" href="tel:0363443443">ğŸ“</a>
  <a class="float-btn zalo" href="https://zalo.me/0363443443">
    <img src="logo-zalo.png" class="zalo-icon">
  </a>
</div>

<div class="container">

<!-- MENU -->
<div class="section" id="menuSection">
  <div class="menu-header">
    <h2 id="menuTitle"></h2>
    <button class="capture-btn" onclick="captureMenu()">ğŸ“¸</button>
  </div>
  <div id="menu">â³ Äang táº£i menu...</div>
</div>

<!-- TOPPING + RAU -->
<div class="section">
  <div class="grid-2">
    <div>
      <h2>â• Topping</h2>
      <div class="row">ğŸŸ Ruá»‘c cÃ¡ há»“i <span style="color:red">+85K</span></div>
      <div class="row">ğŸ§€ PhÃ´ mai tÃ¡ch muá»‘i <span style="color:red">+7K</span></div>
      <div class="row">ğŸ§€ PhÃ´ mai thÆ°á»ng <span style="color:red">+5K</span></div>
      <div class="row">ğŸ§ˆ BÆ¡ láº¡t TH <span style="color:red">+6K</span></div>
      <div class="zalo-under-topping">
        ğŸ‘¥ Nháº­n menu & Æ°u Ä‘Ã£i<br>
        <a href="https://zalo.me/g/ovnitu291">ğŸ‘‰ Tham gia cá»™ng Ä‘á»“ng Zalo</a>
      </div>
    </div>

    <div>
      <h2>ğŸ¥¬ Rau cá»§</h2>
      <div class="row">ğŸŒ¿ Rau ngÃ³t</div>
      <div class="row">ğŸ¥¬ Rau cáº£i</div>
      <div class="row">ğŸƒ Má»“ng tÆ¡i</div>
      <div class="row">ğŸƒ BÃ­ Ä‘á»</div>
      <div class="row">ğŸ¥• CÃ  rá»‘t</div>
      <div class="row">ğŸ  Khoai lang</div>
    </div>
  </div>
</div>

<!-- APP -->
<div class="section">
  <h2>ğŸ“² APP Äáº¶T MÃ“N</h2>
  <div class="app-grid">
    <a href="https://order.ipos.vn/menu?pos_parent=BRAND-ZN72&pos_id=121647"><img src="logo-ipos.png"></a>
    <a href="https://grb.to/chaodinhduongmamnhonghiatan"><img src="logo-grab.png"></a>
    <a href="https://shopeefood.vn/u/T8dvBBe"><img src="logo-shopeefood.png"></a>
    <a href="https://begroup.onelink.me/ZOqn/etvdcsl5"><img src="logo-befood.png"></a>
    <a href="https://xanhsmngon.onelink.me/14WJ/4nxrwpmt"><img src="logo-xanhsm.png"></a>
  </div>
</div>

<!-- COMBO -->
<div class="section">
  <h2>â„ï¸ Combo ChÃ¡o Láº¡nh</h2>
  <div class="combo-preview">
    <img src="combo1.jpg">
    <img src="combo2.jpg">
  </div>
  <button class="combo-btn" onclick="openCombo()">Xem chi tiáº¿t</button>
</div>

<!-- FOOTER -->
<div class="section footer">
  <div>
    <strong>ChÃ¡o Dinh DÆ°á»¡ng Máº§m Nhá» â€“ NghÄ©a TÃ¢n</strong><br>
    103C-A11 NghÄ©a TÃ¢n, P.NghÄ©a ÄÃ´, HÃ  Ná»™i
      <iframe 
        src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d14894.960379276297!2d105.792697!3d21.043083!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135abb38c7c14f7%3A0x7f4eb7d792de80f4!2zQ2jDoW8gRGluaCBExrDhu6FuZyBDYW8gQ-G6pXAgTeG6p20gTmjhu48gLSBOZ2jEqWEgVMOibg!5e0!3m2!1svi!2sus!4v1770304782459!5m2!1svi!2sus"
		style="width:100%;height:180px;border:0;border-radius:12px;"
        loading="lazy">
      </iframe>
	  <p style="
  margin-top:12px;
  font-size:13px;
  color:#555;
  text-align:center;
  line-height:1.6
">
  ğŸ’š Má»—i bÃ¡t chÃ¡o lÃ  sá»± chÄƒm chÃºt tá»« nguyÃªn liá»‡u sáº¡ch vÃ  tÃ¬nh yÃªu dÃ nh cho bÃ©.<br>
  Cáº£m Æ¡n ba máº¹ Ä‘Ã£ tin tÆ°á»Ÿng <strong>ChÃ¡o Dinh DÆ°á»¡ng Máº§m Nhá» â€“ NghÄ©a TÃ¢n</strong>.
</p>

  </div>
  <div class="footer-right">
    <p style="font-size:13px;color:#555">ğŸ’³ QuÃ©t mÃ£ QR Ä‘á»ƒ thanh toÃ¡n</p>
	<img src="qr-thanhtoan.png" class="qr-img" onclick="openQR()">
  </div>
</div>

</div>
<!-- POPUP COMBO CHÃO Láº NH -->
<div class="popup" id="comboPopup">
  <div class="popup-content">

    <h3>â„ï¸ Combo ChÃ¡o Láº¡nh (7 Set)</h3>
    <p style="font-size:14px;color:#555">
      Má»—i combo gá»“m <strong>7 set â€“ dÃ¹ng cho 7 bá»¯a</strong>
    </p>

    <!-- Ná»™i dung -->
    <div class="combo-block">
      <h4>I. ThÃ nh pháº§n má»—i set</h4>
      <ul>
        <li><strong>Khá»‘i lÆ°á»£ng:</strong> 400g</li>
        <li>ğŸš ChÃ¡o tráº¯ng: 300g</li>
        <li>ğŸ¥© NhÃ¢n: 50g</li>
        <li>ğŸ¥¬ Rau cá»§ theo mÃ¹a: 50g</li>
      </ul>
    </div>

    <div class="combo-block">
      <h4>II. Báº£o quáº£n</h4>
      <ul>
        <li>â„ï¸ ÄÃ´ng láº¡nh: -12Â°C Ä‘áº¿n -18Â°C</li>
        <li>ğŸ“† Háº¡n dÃ¹ng: 30 ngÃ y tá»« ngÃ y sáº£n xuáº¥t</li>
        <li>âš ï¸ DÃ¹ng trong ngÃ y sau khi má»Ÿ bao bÃ¬</li>
      </ul>
    </div>

    <div class="combo-block">
      <h4>III. HÆ°á»›ng dáº«n sá»­ dá»¥ng</h4>
      <p><strong>BÆ°á»›c 1:</strong> Cho chÃ¡o tráº¯ng, rau/cá»§ vÃ  nhÃ¢n vÃ o ná»“i.</p>
      <p><strong>BÆ°á»›c 2:</strong> Äun sÃ´i, khuáº¥y Ä‘á»u tay.  
      CÃ³ thá»ƒ thÃªm 1â€“2 giá»t máº¯m hoáº·c 1â€“2 thÃ¬a nÆ°á»›c lá»c tÃ¹y bÃ©.</p>
    </div>

    <div class="combo-note">
      <strong>LÆ°u Ã½:</strong><br>
      â€¢ KhÃ´ng cáº¥p Ä‘Ã´ng láº¡i sau khi má»Ÿ bao bÃ¬.<br>
      â€¢ ChÃ¡o cÃ³ thá»ƒ xá»‘p khi Ä‘Ã´ng, Ä‘un sÃ´i sáº½ dáº»o láº¡i bÃ¬nh thÆ°á»ng.
    </div>

    <!-- NÃšT HÃ€NH Äá»˜NG -->
    <div class="popup-actions">
      <a href="tel:0363443443" class="btn-call">ğŸ“ Gá»i tÆ° váº¥n</a>
      <button class="btn-close" onclick="closeCombo()">âŒ ÄÃ³ng</button>
    </div>
  </div>
</div>

<div class="popup" id="qrPopup">
  <div class="popup-content" style="text-align:center">
    <img src="qr-thanhtoan.png" style="width:100%;max-width:320px">
    <p style="font-size:14px;margin-top:8px">
    </p>
    <button class="btn-close" onclick="closeQR()">âŒ ÄÃ³ng</button>
  </div>
</div>

<script>

/* FLOWER */
const flowers=["ğŸŒ¸"];
const fbox=document.getElementById("flowers");
for(let i=0;i<18;i++){
  const f=document.createElement("div");
  f.className="flower";
  f.innerText=flowers[Math.floor(Math.random()*flowers.length)];
  f.style.left=Math.random()*100+"vw";
  f.style.animationDuration=8+Math.random()*6+"s";
  fbox.appendChild(f);
}

/* TIME */
function updateTime(){
  const d=new Date(),utc7=new Date(d.getTime()+(7*60+d.getTimezoneOffset())*60000);
  const pad=n=>n.toString().padStart(2,"0");
  const h=utc7.getHours()+utc7.getMinutes()/60;
  document.getElementById("timeNow").innerText=`${pad(utc7.getHours())}:${pad(utc7.getMinutes())}`;
  document.getElementById("menuTitle").innerText=
    `ğŸ² MENU CHÃO ${["CN","T2","T3","T4","T5","T6","T7"][utc7.getDay()]} â€“ ${pad(utc7.getDate())}/${pad(utc7.getMonth()+1)}/${utc7.getFullYear()}`;
  document.getElementById("openStatus").innerText=
    h<6.5?"â³ Sáº¯p má»Ÿ â€“ 6:30":
	h<13?"ğŸŸ¢ Äang má»Ÿ":
	h<15.5?"â³ Nghá»‰ trÆ°a":
	h<21?"ğŸŸ¢ Äang má»Ÿ":
	"ğŸŒ™ ÄÃ£ Ä‘Ã³ng â€“ sÃ¡ng mai 6:30";
}
updateTime();
setInterval(updateTime,60000);

/* MENU CACHE */
const SHEET_URL="https://docs.google.com/spreadsheets/d/1Ef7w4wHTjuiSEFwTBvC01ed1ANleYuZj4aI_6HVyHeg/export?format=csv";
const KEY="CMNNT_MENU",TIME="CMNNT_MENU_TIME";
const EXPIRE=600000;

function render(csv){
  let h="";
  csv.split("\n").slice(1).forEach(l=>{
    const c=l.split(",");
    if(c[2]?.trim().toUpperCase()!=="TRUE")return;
    h+=`<div class="menu-item"><div>${c[7]}</div><div class="menu-price">${c[8]}</div></div>`;
  });
  menu.innerHTML=h;
}

function loadMenu(){
  const c=localStorage.getItem(KEY);
  const t=localStorage.getItem(TIME);
  if(c&&t&&Date.now()-t<EXPIRE){render(c);return;}
  fetch(SHEET_URL).then(r=>r.text()).then(csv=>{
    localStorage.setItem(KEY,csv);
    localStorage.setItem(TIME,Date.now());
    render(csv);
  });
}
loadMenu();

/* COMBO */
function openCombo(){comboPopup.style.display="flex"}
function closeCombo(){comboPopup.style.display="none"}

/* CAPTURE */
function captureMenu(){
  html2canvas(menuSection,{scale:2}).then(c=>{
    const a=document.createElement("a");
    a.download="CMNNT_Menu.png";
    a.href=c.toDataURL();
    a.click();
  });
}

function openQR(){
  document.getElementById("qrPopup").style.display="flex";
}
function closeQR(){
  document.getElementById("qrPopup").style.display="none";
}

</script>

</body>
</html>
